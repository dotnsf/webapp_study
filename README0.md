# HTTP(REST API) と MVC(Model, View, Controller) について

## HTTP(HyperText Transfer Protocol)

- いわゆる「ウェブ」のプロトコル

    - 通常、TCP 80 番ポートを利用する。SSL(暗号化)対応した https は 443 番ポートを利用する。

- **ステートレス** な **リクエスト** と **レスポンス** のセット

- リクエストには **ホスト** と呼ばれるサーバーと、 **メソッド** と呼ばれる分類と、 **パス** と呼ばれる目的地から構成される

    - ホストは HTTP のサーバー名または IP アドレス

        - 上述の標準以外のポート番号を利用する場合はポート番号も指定する

    - 主なメソッドは GET / POST / PUT / DELETE

        - ウェブブラウザで URL を指定して **ページを開く** ものは GET

        - フォームに情報を入力して **送信** するものは POST

    - パスはファイルパス名に相当するもの

        - 実在のファイルである場合もある

        - 実在のファイルである必要はないが、そのパスが指定された時の挙動が定義されていないと「Not Found」エラーとなる

    - HTTP は原則的にステートなし

        - リクエストに対してレスポンスが返るとそれで終わり。次のリクエスト時に前回のリクエストとそのレスポンスは無視される。

        - （認証など）ステートを残して次のリクエストを実行したい場合は、リクエストヘッダにセッション情報を記載するなどして対応する必要がある

    - 例

        - ウェブブラウザで 'http://xxxx.com/abc/def/xxx' にアクセスする

            - ホスト xxxx.com に対して GET /abc/def/xxx の HTTP リクエストを実行する

    - リクエスト時に付加情報をリクエストヘッダとして渡すこともできる

- レスポンスはリクエストに対する結果出力

    - **ステータスコード** と呼ばれる実行結果番号があり、これで大まかなリクエストの成功/失敗を判断できる

        - 例：　200 番台: 成功、400 番台: クライアント起因のエラー、500 番台: サーバー起因のエラー

    - GET メソッドでウェブページをリクエストした時の成功結果（の本文）は、求めるページの HTML テキストとなる

    - レスポンス時に付加情報をレスポンスヘッダとして渡すこともできる

        - レスポンス本文がどのようなフォーマットになっているかは、レスポンスヘッダの Content-Type を調べるとわかる


## REST API

- HTTP を用いたリモートプロシージャ実行の仕組み

    - データベース処理時に多く使われる **CRUD(Create/Read/Update/Delete)** 処理を HTTP リクエストメソッドと見なす

        - Create : PUT

        - Read : GET

        - Update : POST

        - Delete : DELETE

    - データベース処理における対象物を HTTP リクエストのパスで表現する

    - 例

        - PUT /user : user を新規作成する

        - GET /users : user 一覧を取得する

        - GET /user/1 : ID:1 の user を取得する

        - POST /user/1 : ID:1 の user を更新する

        - DELETE /user/1 : ID:1 の user を削除する

- REST API の実行結果を HTTP レスポンスで返す


## MVC について

- （ウェブ）アプリケーション開発における **作業分割基準** の１つ

    - M(odel) : データベース設計、アプリケーションから見たデータレコードのオブジェクト化、オブジェクト間の連携定義

        - データベースに詳しい人が担当

    - V(iew) :　ユーザーインターフェース、見た目の定義

        - 画面の HTML, 画像, CSS, UI 部分の JavaScript までが含まれる

        - ワイヤーフレームを HTML, 画像, CSS の形にまで実装したもの

        - UI/UX に詳しい人やデザイナーが担当

    - C(ontroller) : View で定義した各画面や Model で定義したデータベースが実際に連動して動くように制御する

        - （いわゆる）**「プログラミング」はここ**

        - デベロッパーが担当

- UI を定義する時点でフロントエンドの JavaScript を利用することもあり、View と Controller の境目は曖昧になりつつある
